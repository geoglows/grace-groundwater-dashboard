<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <link rel="icon" type="image/svg+xml" href="/vite.svg"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GEOGLOWS GRACE Groundwater Assessment</title>
  <script type="module" src="/src/main.js" defer></script>
</head>
<body>
<div class="nav-bar">
  <h1>GEOGLOWS GRACE Groundwater Assessment</h1>
  <div class="nav-buttons">
    <button id="info-button" class="icon-button" title="Info">
      <calcite-icon icon="information" scale="l"></calcite-icon>
    </button>
  </div>
</div>
<div class="body">
  <arcgis-map item-id="a69f14ea2e784e019f4a4b6835ffd376" zoom="2" center="0,20" class="map-view">
    <!-- Top-left: Navigation -->
    <arcgis-zoom slot="top-left"></arcgis-zoom>
    <arcgis-locate slot="top-left" scale="5000"></arcgis-locate>
    <arcgis-expand slot="top-left" title="Basemap Gallery">
      <arcgis-basemap-gallery></arcgis-basemap-gallery>
    </arcgis-expand>
    <arcgis-expand slot="top-left" title="Legend">
      <arcgis-legend></arcgis-legend>
    </arcgis-expand>
    <!-- Top-right: Config/Info -->
    <arcgis-sketch slot="top-right" title="Drawing Tools" creation-mode="single"></arcgis-sketch>
    <arcgis-layer-list slot="top-right"></arcgis-layer-list>
    <!-- Bottom-left: Reference -->
    <calcite-action slot="bottom-left" icon="refresh" id="refresh-layers"></calcite-action>
    <arcgis-scale-bar slot="bottom-left" bar-style="line" unit="dual"></arcgis-scale-bar>
    <!-- Bottom-right: Primary tool -->
    <arcgis-time-slider slot="bottom-right" play-rate="1000" layout="auto"></arcgis-time-slider>
  </arcgis-map>
  <div id="timeseries-plot" class="chart-container">
    <div class="centered-message">Select an aquifer or use the drawing tools to draw a polygon to get started.</div>
  </div>
</div>

<div id="info-modal" class="modal">
  <div class="modal-content">
    <h2>GEOGLOWS GRACE Groundwater Assessment Tool</h2>
    <p>This is an experimental implementation of an algorithm to identify changes in groundwater storage derived primarily from GRACE and GLDAS.</p>
    <hr>
    <p><strong>How to Use This Tool</strong></p>
    <p>Select an area to analyze:</p>
    <ul>
      <li>Click on an aquifer boundary on the map, or</li>
      <li>Use the drawing tools (top-right of map) to draw a custom region</li>
    </ul>
    <p>The time series plot will display the mean groundwater storage anomaly for your selection.</p>
    <p>Use the time slider (bottom-right of map) to animate changes over time.</p>
    <p>Click the refresh icon (bottom-left of map) to reset and make a new selection.</p>
    <button onclick="document.getElementById('info-modal').classList.toggle('hidden')">Close</button>
  </div>
</div>
</body>
</html>
